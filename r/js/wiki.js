let search_data={},searchBox=document.getElementsByClassName("search-w")[0],searchState=0,inputWrap=document.getElementsByClassName("search-input-w")[0],input=document.getElementById("t-s-input"),button=document.getElementById("t-s-button"),result=document.getElementById("t-search-result"),selected=null,list=[];function goto(a){console.log(a),window.location.href="/w/"+a}function updateList(){let d=input.value.toLowerCase();searchState=d.length>0?2:1;let b=search_data[d];if(b){list!==(b=(b=b.sort()).slice(0,10))&&(selected=null),list=b;let c='<div class="search-result">';for(let a=0;a<list.length;a++)selected===a?c+='<div id="t-s-r-'+a+'" class="selected" onmouseenter="updateSelection('+a+');" onmouseleave="updateSelection(null);" onclick="goto(\''+list[a]+"')\">"+list[a]+"</div>":c+='<div id="t-s-r-'+a+'" onmouseenter="updateSelection('+a+');" onmouseleave="updateSelection(null);" onclick="goto(\''+list[a]+"')\">"+list[a]+"</div>";c+="</div>",result.classList.remove("hide"),result.innerHTML=c}else list=[],result.classList.add("hide"),result.innerHTML=""}function updateSelection(a){selected!==a&&(null!==selected&&document.getElementById("t-s-r-"+selected).classList.remove("selected"),null!==a&&document.getElementById("t-s-r-"+a).classList.add("selected"),selected=a)}function onKey(a,b,c,d){(a.which===b||a.keyCode===b||a.key===c)&&(a.preventDefault(),d())}function openSearchBox(){searchBox.classList.add("expand"),setTimeout(function(){inputWrap.classList.remove("hide"),input.value.length>0&&result.classList.remove("hide"),input.focus()},210),searchState=1}function closeSearchBox(){searchBox.classList.remove("expand"),input.blur(),inputWrap.classList.add("hide"),result.classList.add("hide"),searchState=0}!function(){let c=document.querySelector(".toc"),d=document.querySelector(".toc-marker path"),e,f,g,h;function a(){e=(e=(e=[].slice.call(c.querySelectorAll("li"))).map(function(a){let b=a.querySelector("a"),c=document.getElementById(b.getAttribute("href").slice(1));return{listItem:a,anchor:b,target:c}})).filter(function(a){return!!a.target});let a=[],g;e.forEach(function(b,h){let c=b.anchor.offsetLeft-5,e=b.anchor.offsetTop,f=b.anchor.offsetHeight;0===h?(a.push("M",c,e,"L",c,e+f),b.pathStart=0):(g!==c&&a.push("L",g,e),a.push("L",c,e),d.setAttribute("d",a.join(" ")),b.pathStart=d.getTotalLength()||0,a.push("L",c,e+f)),g=c,d.setAttribute("d",a.join(" ")),b.pathEnd=d.getTotalLength()}),f=d.getTotalLength(),b()}function b(){let i=window.innerHeight,a=f,b=0,c=0;e.forEach(function(d){let e=d.target.getBoundingClientRect();e.bottom>.05*i&&e.top<1*i?(a=Math.min(d.pathStart,a),b=Math.max(d.pathEnd,b),c+=1,d.listItem.classList.add("visible")):d.listItem.classList.remove("visible")}),c>0&&a<b?(a!==g||b!==h)&&(d.setAttribute("stroke-dashoffset","1"),d.setAttribute("stroke-dasharray","1, "+a+", "+(b-a)+", "+f),d.setAttribute("opacity",1)):d.setAttribute("opacity",0),g=a,h=b}window.addEventListener("resize",a,!1),window.addEventListener("scroll",b,!1),a()}(),function(){let a=new XMLHttpRequest;a.open("GET","/r/search.json"),a.send(),a.onload=function(){search_data=JSON.parse(a.response)},input.addEventListener("keydown",function(a){onKey(a,13,"Enter",function(){2===searchState&&goto(list[selected||0]||input.value)}),onKey(a,40,"ArrowDown",function(){let a=selected;null===a?a=0:a++,a>=list.length&&(a=null),updateSelection(a)}),onKey(a,38,"ArrowUp",function(){let a=selected;null===a?a=list.length-1:a--,a<0&&(a=null),updateSelection(a)}),onKey(a,27,"Escape",function(){input.blur()})}),input.addEventListener("input",function(){updateList()}),button.addEventListener("click",function(){0===searchState?openSearchBox():1===searchState?closeSearchBox():goto(list[selected||0]||input.value)})}(),document.addEventListener("keydown",function(a){0===searchState?onKey(a,191,"/",openSearchBox):document.activeElement!==input&&(onKey(a,191,"/",function(){input.focus()}),onKey(a,27,"Escape",closeSearchBox))});let themeButton=document.getElementById("t-t-button"),themeIcon=document.getElementById("t-t-icon"),darkThemeCss=document.getElementById("r-dark"),lightThemeCss=document.getElementById("r-light");function changeTheme(){let a=document.getElementsByTagName("html")[0];"dark"===a.classList[0]?(a.classList=["light"],darkThemeCss.disabled=!0,lightThemeCss.disabled=!1,themeIcon.classList.remove("fa-sun"),themeIcon.classList.remove("fa-lg"),themeIcon.classList.add("fa-moon"),setCookie("theme","light",365)):(a.classList=["dark"],darkThemeCss.disabled=!1,lightThemeCss.disabled=!0,themeIcon.classList.remove("fa-moon"),themeIcon.classList.add("fa-sun"),themeIcon.classList.add("fa-lg"),setCookie("theme","dark",365))}function setCookie(d,e,b){let c="";if(b){let a=new Date;a.setTime(a.getTime()+864e5*b),c="; expires="+a.toUTCString()}document.cookie=d+"="+(e||"")+c+"; path=/"}function getCookie(e){let c=e+"=",d=document.cookie.split(";");for(let b=0;b<d.length;b++){let a=d[b];for(;" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(c))return a.substring(c.length,a.length)}return null}themeButton.addEventListener("click",changeTheme),function(){let a=getCookie("theme");null===a&&(a="dark"),document.getElementsByTagName("html")[0].classList[0]!==a&&changeTheme()}()